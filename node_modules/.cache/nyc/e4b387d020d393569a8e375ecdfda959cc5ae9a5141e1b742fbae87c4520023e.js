var cov_2ia70tmvk3=function(){var path="/Users/tpt-johnhatcher/code/social-directory/lib/GoogleCalendar.tests.js";var hash="721e944ec2845df2b254c1678a0a78838f0767d0";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/tpt-johnhatcher/code/social-directory/lib/GoogleCalendar.tests.js",statementMap:{"0":{start:{line:1,column:15},end:{line:1,column:32}},"1":{start:{line:2,column:14},end:{line:2,column:30}},"2":{start:{line:3,column:19},end:{line:3,column:34}},"3":{start:{line:4,column:23},end:{line:4,column:50}},"4":{start:{line:6,column:0},end:{line:348,column:3}},"5":{start:{line:13,column:2},end:{line:36,column:5}},"6":{start:{line:14,column:4},end:{line:20,column:6}},"7":{start:{line:22,column:4},end:{line:33,column:6}},"8":{start:{line:35,column:4},end:{line:35,column:30}},"9":{start:{line:38,column:2},end:{line:44,column:5}},"10":{start:{line:39,column:4},end:{line:43,column:7}},"11":{start:{line:40,column:17},end:{line:40,column:43}},"12":{start:{line:42,column:6},end:{line:42,column:50}},"13":{start:{line:46,column:2},end:{line:62,column:5}},"14":{start:{line:47,column:4},end:{line:51,column:7}},"15":{start:{line:48,column:6},end:{line:48,column:94}},"16":{start:{line:49,column:6},end:{line:49,column:98}},"17":{start:{line:50,column:6},end:{line:50,column:97}},"18":{start:{line:53,column:4},end:{line:56,column:7}},"19":{start:{line:54,column:6},end:{line:54,column:95}},"20":{start:{line:55,column:6},end:{line:55,column:95}},"21":{start:{line:58,column:4},end:{line:61,column:7}},"22":{start:{line:59,column:6},end:{line:59,column:96}},"23":{start:{line:60,column:6},end:{line:60,column:97}},"24":{start:{line:64,column:2},end:{line:107,column:5}},"25":{start:{line:65,column:19},end:{line:65,column:23}},"26":{start:{line:66,column:17},end:{line:66,column:57}},"27":{start:{line:67,column:15},end:{line:67,column:50}},"28":{start:{line:70,column:4},end:{line:78,column:7}},"29":{start:{line:71,column:6},end:{line:71,column:44}},"30":{start:{line:73,column:6},end:{line:77,column:9}},"31":{start:{line:74,column:8},end:{line:74,column:52}},"32":{start:{line:75,column:8},end:{line:75,column:50}},"33":{start:{line:76,column:8},end:{line:76,column:46}},"34":{start:{line:80,column:4},end:{line:88,column:7}},"35":{start:{line:81,column:6},end:{line:87,column:21}},"36":{start:{line:83,column:10},end:{line:83,column:52}},"37":{start:{line:84,column:10},end:{line:84,column:54}},"38":{start:{line:90,column:4},end:{line:94,column:7}},"39":{start:{line:91,column:6},end:{line:91,column:36}},"40":{start:{line:92,column:6},end:{line:92,column:48}},"41":{start:{line:93,column:6},end:{line:93,column:50}},"42":{start:{line:96,column:4},end:{line:106,column:7}},"43":{start:{line:97,column:6},end:{line:97,column:41}},"44":{start:{line:98,column:6},end:{line:100,column:9}},"45":{start:{line:99,column:8},end:{line:99,column:30}},"46":{start:{line:102,column:6},end:{line:105,column:9}},"47":{start:{line:103,column:8},end:{line:103,column:45}},"48":{start:{line:104,column:8},end:{line:104,column:15}},"49":{start:{line:109,column:2},end:{line:154,column:5}},"50":{start:{line:110,column:4},end:{line:123,column:7}},"51":{start:{line:111,column:23},end:{line:111,column:49}},"52":{start:{line:113,column:6},end:{line:120,column:9}},"53":{start:{line:122,column:6},end:{line:122,column:69}},"54":{start:{line:125,column:4},end:{line:138,column:7}},"55":{start:{line:126,column:23},end:{line:126,column:49}},"56":{start:{line:128,column:6},end:{line:135,column:9}},"57":{start:{line:137,column:6},end:{line:137,column:69}},"58":{start:{line:140,column:4},end:{line:153,column:7}},"59":{start:{line:141,column:23},end:{line:141,column:49}},"60":{start:{line:143,column:6},end:{line:150,column:9}},"61":{start:{line:152,column:6},end:{line:152,column:68}},"62":{start:{line:156,column:2},end:{line:272,column:5}},"63":{start:{line:157,column:4},end:{line:162,column:7}},"64":{start:{line:158,column:23},end:{line:158,column:49}},"65":{start:{line:160,column:6},end:{line:160,column:27}},"66":{start:{line:161,column:6},end:{line:161,column:89}},"67":{start:{line:164,column:4},end:{line:198,column:7}},"68":{start:{line:165,column:23},end:{line:165,column:49}},"69":{start:{line:167,column:6},end:{line:195,column:9}},"70":{start:{line:197,column:6},end:{line:197,column:89}},"71":{start:{line:200,column:4},end:{line:220,column:7}},"72":{start:{line:201,column:23},end:{line:201,column:49}},"73":{start:{line:203,column:6},end:{line:217,column:9}},"74":{start:{line:219,column:6},end:{line:219,column:95}},"75":{start:{line:222,column:4},end:{line:256,column:7}},"76":{start:{line:223,column:23},end:{line:223,column:49}},"77":{start:{line:225,column:6},end:{line:253,column:9}},"78":{start:{line:255,column:6},end:{line:255,column:92}},"79":{start:{line:258,column:4},end:{line:271,column:7}},"80":{start:{line:259,column:23},end:{line:259,column:49}},"81":{start:{line:261,column:6},end:{line:268,column:9}},"82":{start:{line:270,column:6},end:{line:270,column:91}},"83":{start:{line:274,column:2},end:{line:282,column:5}},"84":{start:{line:275,column:4},end:{line:281,column:7}},"85":{start:{line:276,column:6},end:{line:280,column:7}},"86":{start:{line:277,column:8},end:{line:277,column:43}},"87":{start:{line:279,column:8},end:{line:279,column:74}},"88":{start:{line:284,column:2},end:{line:347,column:5}},"89":{start:{line:285,column:4},end:{line:290,column:7}},"90":{start:{line:286,column:23},end:{line:286,column:49}},"91":{start:{line:288,column:6},end:{line:288,column:27}},"92":{start:{line:289,column:6},end:{line:289,column:78}},"93":{start:{line:292,column:4},end:{line:306,column:7}},"94":{start:{line:293,column:23},end:{line:293,column:49}},"95":{start:{line:294,column:23},end:{line:294,column:60}},"96":{start:{line:296,column:6},end:{line:303,column:9}},"97":{start:{line:305,column:6},end:{line:305,column:83}},"98":{start:{line:308,column:4},end:{line:322,column:7}},"99":{start:{line:309,column:23},end:{line:309,column:49}},"100":{start:{line:310,column:23},end:{line:310,column:65}},"101":{start:{line:312,column:6},end:{line:319,column:9}},"102":{start:{line:321,column:6},end:{line:321,column:87}},"103":{start:{line:324,column:4},end:{line:346,column:7}},"104":{start:{line:325,column:23},end:{line:325,column:49}},"105":{start:{line:326,column:24},end:{line:326,column:66}},"106":{start:{line:327,column:24},end:{line:327,column:61}},"107":{start:{line:329,column:6},end:{line:343,column:9}},"108":{start:{line:345,column:6},end:{line:345,column:88}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:35},end:{line:6,column:36}},loc:{start:{line:6,column:41},end:{line:348,column:1}},line:6},"1":{name:"(anonymous_1)",decl:{start:{line:13,column:13},end:{line:13,column:14}},loc:{start:{line:13,column:19},end:{line:36,column:3}},line:13},"2":{name:"(anonymous_2)",decl:{start:{line:38,column:35},end:{line:38,column:36}},loc:{start:{line:38,column:41},end:{line:44,column:3}},line:38},"3":{name:"(anonymous_3)",decl:{start:{line:39,column:38},end:{line:39,column:39}},loc:{start:{line:39,column:44},end:{line:43,column:5}},line:39},"4":{name:"(anonymous_4)",decl:{start:{line:46,column:61},end:{line:46,column:62}},loc:{start:{line:46,column:67},end:{line:62,column:3}},line:46},"5":{name:"(anonymous_5)",decl:{start:{line:47,column:58},end:{line:47,column:59}},loc:{start:{line:47,column:64},end:{line:51,column:5}},line:47},"6":{name:"(anonymous_6)",decl:{start:{line:53,column:42},end:{line:53,column:43}},loc:{start:{line:53,column:48},end:{line:56,column:5}},line:53},"7":{name:"(anonymous_7)",decl:{start:{line:58,column:65},end:{line:58,column:66}},loc:{start:{line:58,column:71},end:{line:61,column:5}},line:58},"8":{name:"(anonymous_8)",decl:{start:{line:64,column:28},end:{line:64,column:29}},loc:{start:{line:64,column:34},end:{line:107,column:3}},line:64},"9":{name:"(anonymous_9)",decl:{start:{line:70,column:15},end:{line:70,column:16}},loc:{start:{line:70,column:21},end:{line:78,column:5}},line:70},"10":{name:"(anonymous_10)",decl:{start:{line:73,column:56},end:{line:73,column:57}},loc:{start:{line:73,column:73},end:{line:77,column:7}},line:73},"11":{name:"(anonymous_11)",decl:{start:{line:80,column:57},end:{line:80,column:58}},loc:{start:{line:80,column:67},end:{line:88,column:5}},line:80},"12":{name:"(anonymous_12)",decl:{start:{line:82,column:14},end:{line:82,column:15}},loc:{start:{line:82,column:20},end:{line:85,column:9}},line:82},"13":{name:"(anonymous_13)",decl:{start:{line:90,column:50},end:{line:90,column:51}},loc:{start:{line:90,column:62},end:{line:94,column:5}},line:90},"14":{name:"(anonymous_14)",decl:{start:{line:96,column:32},end:{line:96,column:33}},loc:{start:{line:96,column:42},end:{line:106,column:5}},line:96},"15":{name:"(anonymous_15)",decl:{start:{line:98,column:56},end:{line:98,column:57}},loc:{start:{line:98,column:73},end:{line:100,column:7}},line:98},"16":{name:"(anonymous_16)",decl:{start:{line:102,column:36},end:{line:102,column:37}},loc:{start:{line:102,column:47},end:{line:105,column:7}},line:102},"17":{name:"(anonymous_17)",decl:{start:{line:109,column:35},end:{line:109,column:36}},loc:{start:{line:109,column:41},end:{line:154,column:3}},line:109},"18":{name:"(anonymous_18)",decl:{start:{line:110,column:67},end:{line:110,column:68}},loc:{start:{line:110,column:73},end:{line:123,column:5}},line:110},"19":{name:"(anonymous_19)",decl:{start:{line:125,column:63},end:{line:125,column:64}},loc:{start:{line:125,column:69},end:{line:138,column:5}},line:125},"20":{name:"(anonymous_20)",decl:{start:{line:140,column:59},end:{line:140,column:60}},loc:{start:{line:140,column:65},end:{line:153,column:5}},line:140},"21":{name:"(anonymous_21)",decl:{start:{line:156,column:45},end:{line:156,column:46}},loc:{start:{line:156,column:51},end:{line:272,column:3}},line:156},"22":{name:"(anonymous_22)",decl:{start:{line:157,column:61},end:{line:157,column:62}},loc:{start:{line:157,column:67},end:{line:162,column:5}},line:157},"23":{name:"(anonymous_23)",decl:{start:{line:164,column:51},end:{line:164,column:52}},loc:{start:{line:164,column:57},end:{line:198,column:5}},line:164},"24":{name:"(anonymous_24)",decl:{start:{line:200,column:58},end:{line:200,column:59}},loc:{start:{line:200,column:64},end:{line:220,column:5}},line:200},"25":{name:"(anonymous_25)",decl:{start:{line:222,column:82},end:{line:222,column:83}},loc:{start:{line:222,column:88},end:{line:256,column:5}},line:222},"26":{name:"(anonymous_26)",decl:{start:{line:258,column:70},end:{line:258,column:71}},loc:{start:{line:258,column:76},end:{line:271,column:5}},line:258},"27":{name:"(anonymous_27)",decl:{start:{line:274,column:34},end:{line:274,column:35}},loc:{start:{line:274,column:40},end:{line:282,column:3}},line:274},"28":{name:"(anonymous_28)",decl:{start:{line:275,column:54},end:{line:275,column:55}},loc:{start:{line:275,column:60},end:{line:281,column:5}},line:275},"29":{name:"(anonymous_29)",decl:{start:{line:284,column:41},end:{line:284,column:42}},loc:{start:{line:284,column:47},end:{line:347,column:3}},line:284},"30":{name:"(anonymous_30)",decl:{start:{line:285,column:56},end:{line:285,column:57}},loc:{start:{line:285,column:62},end:{line:290,column:5}},line:285},"31":{name:"(anonymous_31)",decl:{start:{line:292,column:80},end:{line:292,column:81}},loc:{start:{line:292,column:86},end:{line:306,column:5}},line:292},"32":{name:"(anonymous_32)",decl:{start:{line:308,column:59},end:{line:308,column:60}},loc:{start:{line:308,column:65},end:{line:322,column:5}},line:308},"33":{name:"(anonymous_33)",decl:{start:{line:324,column:70},end:{line:324,column:71}},loc:{start:{line:324,column:76},end:{line:346,column:5}},line:324}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0},b:{},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();const moment=(cov_2ia70tmvk3.s[0]++,require('moment'));const sinon=(cov_2ia70tmvk3.s[1]++,require('sinon'));// eslint-disable-line import/no-extraneous-dependencies
const{expect}=(cov_2ia70tmvk3.s[2]++,require('chai'));// eslint-disable-line import/no-extraneous-dependencies
const GoogleCalendar=(cov_2ia70tmvk3.s[3]++,require('./GoogleCalendar'));cov_2ia70tmvk3.s[4]++;describe('[class] GoogleCalendar',()=>{cov_2ia70tmvk3.f[0]++;/* eslint no-unused-expressions:0 */let token;let oauth;let config;cov_2ia70tmvk3.s[5]++;beforeEach(()=>{cov_2ia70tmvk3.f[1]++;cov_2ia70tmvk3.s[6]++;token={access_token:'ya29.GlvlBl0RsTtU8uZNOI5P5ErrGPVm5OXB9YfgScGANfBaIxj5qAhYC5N1QPWpWyqzagy4neR3kRBLM6Vxd2fdU0KppVOZSMBbn1i2snGg9Xj_kxRGjTRHDSAWvsrB',refresh_token:'1/kSncFfEAZy5tgIknvaUhr4T8EW6FvpOTBofUNwBBLO8',scope:'https://www.googleapis.com/auth/calendar.readonly',token_type:'Bearer',expiry_date:1554684728523};cov_2ia70tmvk3.s[7]++;oauth={client_id:'164452747151-9fs797qomrppmnol162m7vmi3k9d2ig3.apps.googleusercontent.com',project_id:'quickstart-1551571748055',auth_uri:'https://accounts.google.com/o/oauth2/auth',token_uri:'https://oauth2.googleapis.com/token',auth_provider_x509_cert_url:'https://www.googleapis.com/oauth2/v1/certs',client_secret:'wEkEaKZxQ5YJ9DJM3LU91mxY',redirect_uris:['urn:ietf:wg:oauth:2.0:oob','http://localhost']};cov_2ia70tmvk3.s[8]++;config={token,oauth};});cov_2ia70tmvk3.s[9]++;describe('[method] constructor',()=>{cov_2ia70tmvk3.f[2]++;cov_2ia70tmvk3.s[10]++;it('should export a constructor',()=>{cov_2ia70tmvk3.f[3]++;const gs=(cov_2ia70tmvk3.s[11]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[12]++;expect(gs).to.be.instanceOf(GoogleCalendar);});});cov_2ia70tmvk3.s[13]++;describe('[method] emailMatch, using [method] cleanEmail',()=>{cov_2ia70tmvk3.f[4]++;cov_2ia70tmvk3.s[14]++;it('should match regardless of periods before the @',()=>{cov_2ia70tmvk3.f[5]++;cov_2ia70tmvk3.s[15]++;expect(GoogleCalendar.emailMatch('john.doe@gmail.com','johndoe@gmail.com')).to.be.true;cov_2ia70tmvk3.s[16]++;expect(GoogleCalendar.emailMatch('jo.hn.doe@gmail.com','joh..ndoe.@gmail.com')).to.be.true;cov_2ia70tmvk3.s[17]++;expect(GoogleCalendar.emailMatch('john.doe@g.mail.com','john.doe@gmail.com')).to.be.false;});cov_2ia70tmvk3.s[18]++;it('should match regardless of case',()=>{cov_2ia70tmvk3.f[6]++;cov_2ia70tmvk3.s[19]++;expect(GoogleCalendar.emailMatch('john.Doe@gmail.com','john.doe@gmail.com')).to.be.true;cov_2ia70tmvk3.s[20]++;expect(GoogleCalendar.emailMatch('JOHN.doe@gMail.com','john.doe@gmail.com')).to.be.true;});cov_2ia70tmvk3.s[21]++;it('should match regardless of trailing/leading whitespace',()=>{cov_2ia70tmvk3.f[7]++;cov_2ia70tmvk3.s[22]++;expect(GoogleCalendar.emailMatch(' john.doe@gmail.com','john.doe@gmail.com')).to.be.true;cov_2ia70tmvk3.s[23]++;expect(GoogleCalendar.emailMatch('john.doe@gmail.com ',' john.doe@gmail.com')).to.be.true;});});cov_2ia70tmvk3.s[24]++;describe('[method] load',()=>{cov_2ia70tmvk3.f[8]++;const events=(cov_2ia70tmvk3.s[25]++,[{}]);const from=(cov_2ia70tmvk3.s[26]++,moment().subtract(12,'months').toDate());const to=(cov_2ia70tmvk3.s[27]++,moment().add(12,'months').toDate());let calendar;cov_2ia70tmvk3.s[28]++;beforeEach(()=>{cov_2ia70tmvk3.f[9]++;cov_2ia70tmvk3.s[29]++;calendar=new GoogleCalendar(config);cov_2ia70tmvk3.s[30]++;sinon.stub(calendar.api.events,'list').callsFake((options,cb)=>{cov_2ia70tmvk3.f[10]++;cov_2ia70tmvk3.s[31]++;expect(options.timeMin).to.deep.equal(from);cov_2ia70tmvk3.s[32]++;expect(options.timeMax).to.deep.equal(to);cov_2ia70tmvk3.s[33]++;cb(null,{data:{items:events}});});});cov_2ia70tmvk3.s[34]++;it('should load calendar data, returning a promise',done=>{cov_2ia70tmvk3.f[11]++;cov_2ia70tmvk3.s[35]++;calendar.load(from,to).then(()=>{cov_2ia70tmvk3.f[12]++;cov_2ia70tmvk3.s[36]++;expect(calendar.events).to.be.an('array');cov_2ia70tmvk3.s[37]++;expect(calendar.events).to.have.lengthOf(1);}).then(done).catch(done);});cov_2ia70tmvk3.s[38]++;it('should load calendar data, await syntax',async()=>{cov_2ia70tmvk3.f[13]++;cov_2ia70tmvk3.s[39]++;await calendar.load(from,to);cov_2ia70tmvk3.s[40]++;expect(calendar.events).to.be.an('array');cov_2ia70tmvk3.s[41]++;expect(calendar.events).to.have.lengthOf(1);});cov_2ia70tmvk3.s[42]++;it('should reject w/error',done=>{cov_2ia70tmvk3.f[14]++;cov_2ia70tmvk3.s[43]++;calendar.api.events.list.restore();cov_2ia70tmvk3.s[44]++;sinon.stub(calendar.api.events,'list').callsFake((options,cb)=>{cov_2ia70tmvk3.f[15]++;cov_2ia70tmvk3.s[45]++;cb({name:'Boom!'});});cov_2ia70tmvk3.s[46]++;calendar.load(from,to).catch(error=>{cov_2ia70tmvk3.f[16]++;cov_2ia70tmvk3.s[47]++;expect(error.name).to.equal('Boom!');cov_2ia70tmvk3.s[48]++;done();});});});cov_2ia70tmvk3.s[49]++;describe('[method] isScheduled',()=>{cov_2ia70tmvk3.f[17]++;cov_2ia70tmvk3.s[50]++;it('should return false if email is not on any future events',()=>{cov_2ia70tmvk3.f[18]++;const calendar=(cov_2ia70tmvk3.s[51]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[52]++;calendar.events=[{start:{dateTime:moment().add(500,'years').toISOString()},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[53]++;expect(calendar.isScheduled('bob.dole@gmail.com')).to.be.false;});cov_2ia70tmvk3.s[54]++;it('should return false if email is only on a past event',()=>{cov_2ia70tmvk3.f[19]++;const calendar=(cov_2ia70tmvk3.s[55]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[56]++;calendar.events=[{start:{dateTime:moment().subtract(500,'years').toISOString()},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[57]++;expect(calendar.isScheduled('john.doe@gmail.com')).to.be.false;});cov_2ia70tmvk3.s[58]++;it('should return true if email is on a future event',()=>{cov_2ia70tmvk3.f[20]++;const calendar=(cov_2ia70tmvk3.s[59]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[60]++;calendar.events=[{start:{dateTime:moment().add(500,'years').toISOString()},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[61]++;expect(calendar.isScheduled('john.doe@gmail.com')).to.be.true;});});cov_2ia70tmvk3.s[62]++;describe('[method] computeFrequencyScore',()=>{cov_2ia70tmvk3.f[21]++;cov_2ia70tmvk3.s[63]++;it('should compute a score of 0 if no events are found',()=>{cov_2ia70tmvk3.f[22]++;const calendar=(cov_2ia70tmvk3.s[64]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[65]++;calendar.events=[];cov_2ia70tmvk3.s[66]++;expect(calendar.computeFrequencyScore('bogus@email.com','quarterly')).to.equal(0);});cov_2ia70tmvk3.s[67]++;it('should compute a score of 1 if on target',()=>{cov_2ia70tmvk3.f[23]++;const calendar=(cov_2ia70tmvk3.s[68]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[69]++;calendar.events=[{start:{dateTime:moment().subtract(1,'week').toISOString()},attendees:[{email:'john.doe@gmail.com'}]},{start:{dateTime:moment().subtract(2,'week').toISOString()},attendees:[{email:'john.doe@gmail.com'}]},{start:{dateTime:moment().subtract(3,'week').toISOString()},attendees:[{email:'john.doe@gmail.com'}]},{start:{dateTime:moment().subtract(4,'week').toISOString()},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[70]++;expect(calendar.computeFrequencyScore('john.doe@gmail.com','weekly')).to.equal(1);});cov_2ia70tmvk3.s[71]++;it('should compute a score of 0.5 if half on target',()=>{cov_2ia70tmvk3.f[24]++;const calendar=(cov_2ia70tmvk3.s[72]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[73]++;calendar.events=[{start:{dateTime:moment().subtract(6,'months').toISOString()},attendees:[{email:'john.doe@gmail.com'}]},{start:{dateTime:moment().subtract(15,'months').toISOString()},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[74]++;expect(calendar.computeFrequencyScore('john.doe@gmail.com','biannually')).to.equal(0.5);});cov_2ia70tmvk3.s[75]++;it('should compute a score of 0.5 if half on target, ignoring future events',()=>{cov_2ia70tmvk3.f[25]++;const calendar=(cov_2ia70tmvk3.s[76]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[77]++;calendar.events=[{start:{dateTime:moment().subtract(5,'months').toISOString()},attendees:[{email:'john.doe@gmail.com'}]},{start:{dateTime:moment().subtract(4,'months').toISOString()},attendees:[{email:'john.doe@gmail.com'}]},{start:{dateTime:moment().subtract(3,'months').toISOString()},attendees:[{email:'john.doe@gmail.com'}]},{start:{dateTime:moment().add(6,'months').toISOString()},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[78]++;expect(calendar.computeFrequencyScore('john.doe@gmail.com','monthly')).to.equal(0.5);});cov_2ia70tmvk3.s[79]++;it('should compute a score of 1 if annual was seen in last year',()=>{cov_2ia70tmvk3.f[26]++;const calendar=(cov_2ia70tmvk3.s[80]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[81]++;calendar.events=[{start:{dateTime:moment().subtract(11,'months').toISOString()},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[82]++;expect(calendar.computeFrequencyScore('john.doe@gmail.com','annually')).to.equal(1);});});cov_2ia70tmvk3.s[83]++;describe('[method] getMinDate',()=>{cov_2ia70tmvk3.f[27]++;cov_2ia70tmvk3.s[84]++;it('should throw an error if unrecorgnized type',()=>{cov_2ia70tmvk3.f[28]++;cov_2ia70tmvk3.s[85]++;try{cov_2ia70tmvk3.s[86]++;GoogleCalendar.getMinDate('bogus');}catch(error){cov_2ia70tmvk3.s[87]++;expect(error.message).to.equal('Unknown target frequency! bogus');}});});cov_2ia70tmvk3.s[88]++;describe('[method] findLastEventDate',()=>{cov_2ia70tmvk3.f[29]++;cov_2ia70tmvk3.s[89]++;it('should return null if no prior event is found',()=>{cov_2ia70tmvk3.f[30]++;const calendar=(cov_2ia70tmvk3.s[90]++,new GoogleCalendar(config));cov_2ia70tmvk3.s[91]++;calendar.events=[];cov_2ia70tmvk3.s[92]++;expect(calendar.findLastEventDate('john.doe@gmail.com')).to.equal(null);});cov_2ia70tmvk3.s[93]++;it('should return null if no prior event is found, ignoring future events',()=>{cov_2ia70tmvk3.f[31]++;const calendar=(cov_2ia70tmvk3.s[94]++,new GoogleCalendar(config));const dateTime=(cov_2ia70tmvk3.s[95]++,moment().add(2,'week').toISOString());cov_2ia70tmvk3.s[96]++;calendar.events=[{start:{dateTime},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[97]++;expect(calendar.findLastEventDate('john.doe@gmail.com')).to.deep.equal(null);});cov_2ia70tmvk3.s[98]++;it('should return the date of last prior event found',()=>{cov_2ia70tmvk3.f[32]++;const calendar=(cov_2ia70tmvk3.s[99]++,new GoogleCalendar(config));const dateTime=(cov_2ia70tmvk3.s[100]++,moment().subtract(2,'week').toISOString());cov_2ia70tmvk3.s[101]++;calendar.events=[{start:{dateTime},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[102]++;expect(calendar.findLastEventDate('john.doe@gmail.com')).to.deep.equal(dateTime);});cov_2ia70tmvk3.s[103]++;it('should return the date of the most recent prior event found',()=>{cov_2ia70tmvk3.f[33]++;const calendar=(cov_2ia70tmvk3.s[104]++,new GoogleCalendar(config));const dateTime1=(cov_2ia70tmvk3.s[105]++,moment().subtract(2,'week').toISOString());const dateTime2=(cov_2ia70tmvk3.s[106]++,moment().add(2,'week').toISOString());cov_2ia70tmvk3.s[107]++;calendar.events=[{start:{dateTime:dateTime1},attendees:[{email:'john.doe@gmail.com'}]},{start:{dateTime:dateTime2},attendees:[{email:'john.doe@gmail.com'}]}];cov_2ia70tmvk3.s[108]++;expect(calendar.findLastEventDate('john.doe@gmail.com')).to.deep.equal(dateTime1);});});});